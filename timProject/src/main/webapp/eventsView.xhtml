<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions">

<body>
	<ui:composition template="template.xhtml">
		<ui:define name="content">
			<h:form id="mainForm">
				<p:dataTable var="event" value="#{allEventView.events}"
					rowKey="#{allEventView.selectedEvent.eventId}" rows="12"
					paginator="true" rowsPerPageTemplate="6,12,16">
					<f:facet name="header">Wydarzenia</f:facet>
					<p:column headerText="Nazwa wydarzenia">
						<h:outputText value="#{event.eventName}" />
					</p:column>
					<p:column width="20">
						<p:commandLink update=":mainForm:dlg"
							oncomplete="PF('dlg').show()" title="Szczegóły">
							<f:setPropertyActionListener value="#{event}"
								target="#{allEventView.selectedEvent}" />
							<h:outputText styleClass="ui-icon ui-icon-search"
								style="margin:0 auto;" />
						</p:commandLink>
					</p:column>
					<p:column width="20">
						<p:commandLink update=":editForm:dlg"
							oncomplete="PF('dlg').show()" title="Szczegóły">
							<f:setPropertyActionListener value="#{event}"
								target="#{eventReg.event}" />
							<h:outputText styleClass="ui-icon ui-icon-pencil"
								style="margin:0 auto;" />
						</p:commandLink>
					</p:column>
				</p:dataTable>


				<p:dialog id="dlg" header="Podgląd zdjęcia" widgetVar="dlg"
					modal="true" draggable="false" resizable="false">
					<h:outputText value="Nazwa: " style="font-weight: bold;" />
					<h:outputText value="#{allEventView.selectedEvent.eventName}" />
				</p:dialog>
			</h:form>

			<h:form id="editForm">
				<p:dialog id="dlg" header="Podgląd zdjęcia" widgetVar="dlg"
					modal="true" draggable="false" resizable="false">
					<h:outputText value="Nazwa: " style="font-weight: bold;" />
					<h:inputText value="#{eventReg.event.eventName}" />

					<p:panelGrid columns="2">
						<p:outputLabel value="Tagi wydarzenia" for="tags" />
						<p:pickList id="tags" value="#{eventReg.tags}" var="tag"
							itemValue="#{tag}" itemLabel="#{tag.tagName}" showCheckbox="true"
							showSourceFilter="true" showTargetFilter="true"
							filterMatchMode="contains" converter="#{tagConverter}">
							<f:facet name="sourceCaption">Dostępne tagi</f:facet>
							<f:facet name="targetCaption">Tagi eventu</f:facet>
							<p:ajax event="transfer" listener="#{eventReg.onTagTransfer}" />
						</p:pickList>

						<p:outputLabel value="Rodzaje ubrań wydarzenia" for="clothesTypes" />
						<p:pickList id="clothesTypes" value="#{eventReg.clothesTypes}"
							var="ct" itemValue="#{ct}" itemLabel="#{ct.clothesTypeName}"
							showCheckbox="true" showSourceFilter="true"
							showTargetFilter="true" filterMatchMode="contains"
							converter="#{clothesTypeConverter}">
							<f:facet name="sourceCaption">Dostępne rodzaje</f:facet>
							<f:facet name="targetCaption">Wydarzenia</f:facet>

							<p:ajax event="transfer"
								listener="#{eventReg.onClothesTypeTransfer}" />
						</p:pickList>
					</p:panelGrid>
				</p:dialog>
			</h:form>
		</ui:define>
	</ui:composition>
</body>
</html>